<div class="tweet-card" [class.reply]="tweet.replyTo" [class.is-repost]="tweet.isRepost">

  <!-- â”€â”€ Cabecera "X reposteÃ³" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="repost-header" *ngIf="tweet.isRepost" (click)="goToProfile(tweet.repostedByUsername)">
    <span class="repost-icon">ğŸ”</span>
    <span>{{ tweet.repostedByDisplayName }} reposteÃ³</span>
  </div>

  <div class="tweet-inner">
    <!-- Avatar del autor ORIGINAL -->
    <div class="tweet-avatar" (click)="goToProfile(tweet.isRepost ? tweet.originalUsername : tweet.username)">
      <img [src]="(tweet.isRepost ? tweet.originalAvatarUrl : tweet.avatarUrl) || 'assets/default-avatar.png'"
           [alt]="tweet.isRepost ? tweet.originalDisplayName : tweet.displayName" />
    </div>

    <div class="tweet-body">
      <div class="tweet-header">
        <!-- Nombre del autor ORIGINAL -->
        <span class="display-name" (click)="goToProfile(tweet.isRepost ? tweet.originalUsername : tweet.username)">
          {{ tweet.isRepost ? tweet.originalDisplayName : tweet.displayName }}
        </span>
        <span class="username" (click)="goToProfile(tweet.isRepost ? tweet.originalUsername : tweet.username)">
          &#64;{{ tweet.isRepost ? tweet.originalUsername : tweet.username }}
        </span>
        <span class="separator">Â·</span>
        <span class="time">{{ (tweet.isRepost ? tweet.originalCreatedAt : tweet.createdAt) | timeAgo }}</span>

        <div class="tweet-actions-menu" *ngIf="canDelete()">
          <button class="btn-delete" (click)="deleteThisThread()" title="Eliminar">ğŸ—‘ï¸</button>
        </div>
      </div>

      <div class="tweet-content">
        <p>{{ tweet.isRepost ? tweet.originalContent : tweet.content }}</p>
        <div class="tweet-image" *ngIf="tweet.isRepost ? tweet.originalImageUrl : tweet.imageUrl">
          <img [src]="tweet.isRepost ? tweet.originalImageUrl : tweet.imageUrl" alt="imagen del tweet" />
        </div>
      </div>

      <div class="tweet-footer">
        <!-- Responder -->
        <button class="action-btn reply-btn" (click)="emitReply()" title="Responder">
          <span class="icon">ğŸ’¬</span>
        </button>

        <!-- Repostear (solo en tweets raÃ­z, no en reposts de reposts) -->
        <button
          class="action-btn repost-btn"
          [class.reposted]="isReposted"
          [class.loading]="reposting"
          (click)="toggleRepost()"
          [disabled]="reposting || tweet.isRepost"
          [title]="tweet.isRepost ? 'No se puede re-repostear' : (isReposted ? 'Deshacer repost' : 'Repostear')"
          *ngIf="!tweet.replyTo">
          <span class="icon" *ngIf="!reposting">ğŸ”</span>
          <span class="mini-spinner" *ngIf="reposting"></span>
          <span class="count" *ngIf="repostsCount > 0">{{ repostsCount }}</span>
        </button>

        <!-- Like -->
        <button class="action-btn like-btn" [class.liked]="isLiked" (click)="toggleLike()">
          <span class="icon">{{ isLiked ? 'â¤ï¸' : 'ğŸ¤' }}</span>
          <span class="count" *ngIf="likesCount > 0">{{ likesCount }}</span>
        </button>
      </div>
    </div>
  </div>
</div>